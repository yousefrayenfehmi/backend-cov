# üìö Index des Guides de D√©ploiement OVH

Tous les guides et ressources pour d√©ployer votre backend sur OVH.

---

## üéØ Par o√π commencer ?

### üëâ **Vous d√©butez avec OVH ?**
Commencez par lire dans cet ordre :

1. **README_DEPLOYMENT.md** - Vue d'ensemble
2. **DEPLOYMENT_OVH.md** - Guide complet pas √† pas
3. **CHECKLIST_DEPLOIEMENT_OVH.md** - Suivez cette checklist pendant le d√©ploiement

### üëâ **Vous √™tes press√© ?**
1. **RESUME_DEPLOYMENT_OVH.md** - Version rapide
2. **CHECKLIST_DEPLOIEMENT_OVH.md** - Cochez au fur et √† mesure

### üëâ **Vous cherchez une commande ?**
**COMMANDES_OVH.md** - Aide-m√©moire de toutes les commandes

---

## üìñ Liste compl√®te des fichiers

### üåü Guides principaux

| Fichier | Description | Difficult√© | Temps |
|---------|-------------|------------|-------|
| **DEPLOYMENT_OVH.md** | Guide complet et d√©taill√© avec explications | ‚≠ê‚≠ê D√©butant | 45 min |
| **RESUME_DEPLOYMENT_OVH.md** | Version courte, commandes essentielles | ‚≠ê‚≠ê‚≠ê Interm√©diaire | 20 min |
| **CHECKLIST_DEPLOIEMENT_OVH.md** | Checklist √† suivre √©tape par √©tape | ‚≠ê Tous niveaux | 30-45 min |

### üõ†Ô∏è Outils et r√©f√©rences

| Fichier | Description | Usage |
|---------|-------------|-------|
| **COMMANDES_OVH.md** | Aide-m√©moire de toutes les commandes utiles | üìñ R√©f√©rence |
| **deploy-ovh.sh** | Script interactif pour g√©rer le d√©ploiement | üîß Outil |
| **README_DEPLOYMENT.md** | Vue d'ensemble de toutes les options de d√©ploiement | üìò Introduction |
| **ecosystem.config.js** | Configuration PM2 (√† cr√©er pendant d√©ploiement) | ‚öôÔ∏è Config |

### üìö Documentation g√©n√©rale

| Fichier | Description |
|---------|-------------|
| **DEPLOYMENT.md** | D√©ploiement multi-plateforme (Render, Railway, Heroku, VPS) |
| **DOCKER_GUIDE.md** | D√©ploiement avec Docker |
| **API.md** | Documentation compl√®te de l'API |
| **README.md** | Documentation g√©n√©rale du backend |

---

## üó∫Ô∏è Guide d'utilisation par sc√©nario

### Sc√©nario 1 : Premier d√©ploiement sur OVH

```
1. Lisez README_DEPLOYMENT.md (10 min)
   ‚îî‚îÄ> Comprendre les options disponibles
   
2. Pr√©parez vos informations
   ‚îî‚îÄ> IP serveur, MongoDB URI, Cloudinary, etc.
   
3. Ouvrez DEPLOYMENT_OVH.md et CHECKLIST_DEPLOIEMENT_OVH.md c√¥te √† c√¥te
   ‚îî‚îÄ> Suivez le guide complet + cochez la checklist
   
4. Gardez COMMANDES_OVH.md ouvert pour r√©f√©rence
   ‚îî‚îÄ> Copier-coller les commandes rapidement
   
5. Utilisez deploy-ovh.sh pour la maintenance future
   ‚îî‚îÄ> Script automatique
```

### Sc√©nario 2 : Je connais d√©j√† Linux/VPS

```
1. RESUME_DEPLOYMENT_OVH.md
   ‚îî‚îÄ> Commandes essentielles uniquement
   
2. CHECKLIST_DEPLOIEMENT_OVH.md
   ‚îî‚îÄ> Pour ne rien oublier
   
3. deploy-ovh.sh
   ‚îî‚îÄ> Outil pour automatiser
```

### Sc√©nario 3 : Maintenance et mises √† jour

```
1. deploy-ovh.sh
   ‚îî‚îÄ> Menu interactif pour tout g√©rer
   
2. COMMANDES_OVH.md
   ‚îî‚îÄ> R√©f√©rence rapide des commandes
```

### Sc√©nario 4 : Probl√®me ou debugging

```
1. DEPLOYMENT_OVH.md > Section "D√©pannage"
   ‚îî‚îÄ> Solutions aux probl√®mes courants
   
2. COMMANDES_OVH.md > Section "D√©pannage rapide"
   ‚îî‚îÄ> Commandes de diagnostic
   
3. Logs :
   - pm2 logs covoiturage-api
   - sudo tail -f /var/log/nginx/error.log
```

---

## üìã Contenu d√©taill√© de chaque fichier

### 1. **DEPLOYMENT_OVH.md** ‚≠ê RECOMMAND√â

**Taille :** ~15 pages  
**Temps de lecture :** 30 min  
**Temps d'ex√©cution :** 45 min  

**Contient :**
- ‚úÖ Introduction et pr√©requis
- ‚úÖ 8 √©tapes d√©taill√©es avec explications
  1. Connexion SSH au serveur
  2. Installation de Node.js
  3. Configuration du projet
  4. Installation PM2
  5. Configuration Nginx
  6. SSL Let's Encrypt
  7. Configuration Firewall
  8. Tests et v√©rification
- ‚úÖ Configuration MongoDB Atlas
- ‚úÖ Mise √† jour du code (git pull)
- ‚úÖ Monitoring et maintenance
- ‚úÖ Section d√©pannage compl√®te
- ‚úÖ Mise √† jour du frontend

**Id√©al pour :** Premi√®re fois, veut comprendre chaque √©tape

---

### 2. **RESUME_DEPLOYMENT_OVH.md**

**Taille :** ~3 pages  
**Temps de lecture :** 5 min  
**Temps d'ex√©cution :** 20 min  

**Contient :**
- ‚ö° Commandes essentielles uniquement
- ‚ö° Configuration Nginx minimaliste
- ‚ö° Pas d'explications
- ‚ö° Section "Commandes utiles"
- ‚ö° Section "En cas de probl√®me"

**Id√©al pour :** Conna√Æt Linux, veut aller vite

---

### 3. **CHECKLIST_DEPLOIEMENT_OVH.md** ‚≠ê PRATIQUE

**Taille :** ~8 pages  
**Format :** Checklist √† cocher  

**Contient :**
- üìã Pr√©requis avec espaces √† remplir
- üìã 15 √©tapes avec cases √† cocher
- üìã Tests finaux
- üìã Informations √† noter
- üìã Maintenance

**Id√©al pour :** Suivre la progression, ne rien oublier

---

### 4. **COMMANDES_OVH.md** ‚≠ê R√âF√âRENCE

**Taille :** ~12 pages  
**Format :** Aide-m√©moire  

**Contient :**
- üîê Commandes SSH
- üìÅ Navigation et fichiers
- üì¶ PM2 (20+ commandes)
- üîÑ Git
- üì¶ NPM/Node.js
- üåê Nginx
- üî• Firewall
- üîí SSL/Certbot
- üìä Monitoring syst√®me
- üîÑ Transfert de fichiers (SCP)
- üß™ Tests et d√©bogage
- üõ†Ô∏è Maintenance
- üìù Permissions
- üîç Recherche
- ‚ö° Raccourcis clavier
- üéØ Workflow type
- üÜò D√©pannage
- üí° Alias utiles

**Id√©al pour :** R√©f√©rence rapide, copier-coller

---

### 5. **deploy-ovh.sh** ‚≠ê AUTOMATISATION

**Type :** Script Bash interactif  

**Fonctionnalit√©s :**
- üì• Premier d√©ploiement complet
- üîÑ Mise √† jour du code (git pull)
- üî® Rebuild et red√©marrer
- üîÅ Red√©marrer l'application
- üìä Voir les logs
- üìà Voir le statut
- üõë Arr√™ter l'application
- ‚ñ∂Ô∏è D√©marrer l'application
- üß™ Tester l'API
- üßπ Nettoyer

**Utilisation :**
```bash
cd ~/apps/projet-covoiturage/backend
./deploy-ovh.sh
```

**Id√©al pour :** Automatiser les t√¢ches r√©p√©titives

---

### 6. **README_DEPLOYMENT.md**

**Taille :** ~10 pages  
**Format :** Vue d'ensemble  

**Contient :**
- üìö Liste de tous les guides
- üéØ Comparaison des options (OVH vs Render vs Docker)
- üöÄ D√©marrage rapide
- üìã Checklist pr√©-d√©ploiement
- üìñ Autres documentations disponibles

**Id√©al pour :** D√©couvrir les options, choisir la meilleure

---

## üî• Guide de d√©marrage rapide

### Si vous voulez d√©ployer MAINTENANT :

1. **Ouvrez 2 onglets c√¥te √† c√¥te :**
   - Onglet gauche : `DEPLOYMENT_OVH.md`
   - Onglet droite : `CHECKLIST_DEPLOIEMENT_OVH.md`

2. **Pr√©parez :**
   - Adresse IP de votre serveur OVH
   - MongoDB Atlas URI
   - Cloudinary credentials
   - Fichier `.env` pr√™t

3. **Suivez √©tape par √©tape**

4. **Gardez ouvert :** `COMMANDES_OVH.md` pour copier-coller

5. **Temps total :** 30-45 minutes

---

## üì± Apr√®s le d√©ploiement

Une fois le backend d√©ploy√©, n'oubliez pas de :

1. **Mettre √† jour l'URL dans le frontend**
   ```typescript
   // covoiturage-app/config/api.ts
   export const API_URL = 'https://votre-url/api';
   ```

2. **Tester toutes les fonctionnalit√©s**
   - Inscription / Connexion
   - Cr√©ation de trajet
   - R√©servation
   - Upload photo
   - Notifications

3. **Installer le script d'aide**
   ```bash
   cd ~/apps/projet-covoiturage/backend
   chmod +x deploy-ovh.sh
   ```

---

## üîÑ Workflow de mise √† jour recommand√©

### Pour les mises √† jour r√©guli√®res :

**Option 1 : Script automatique (recommand√©)**
```bash
ssh ubuntu@votre-ip
cd ~/apps/projet-covoiturage/backend
./deploy-ovh.sh
# Choisir option 2 : Mettre √† jour le code
```

**Option 2 : Manuelle**
```bash
ssh ubuntu@votre-ip
cd ~/apps/projet-covoiturage/backend
git pull origin main
npm install
npm run build
pm2 restart covoiturage-api
pm2 logs
```

---

## üÜò Besoin d'aide ?

### Ordre de consultation en cas de probl√®me :

1. **DEPLOYMENT_OVH.md** > Section "D√©pannage"
2. **COMMANDES_OVH.md** > Section "D√©pannage rapide"
3. **Logs :**
   ```bash
   pm2 logs covoiturage-api
   sudo tail -f /var/log/nginx/error.log
   ```
4. **Tests :**
   ```bash
   curl http://localhost:3000/health
   pm2 status
   sudo systemctl status nginx
   ```

---

## üìä Comparaison des guides

| Crit√®re | DEPLOYMENT_OVH | RESUME_OVH | CHECKLIST | COMMANDES |
|---------|---------------|------------|-----------|-----------|
| **D√©tail** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **Rapidit√©** | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **Explications** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê | ‚≠ê‚≠ê | ‚≠ê‚≠ê |
| **D√©butant** | ‚úÖ Parfait | ‚ùå | ‚úÖ Bien | ‚ö†Ô∏è R√©f√©rence |
| **Exp√©riment√©** | ‚ö†Ô∏è Trop d√©taill√© | ‚úÖ Parfait | ‚úÖ Utile | ‚úÖ Parfait |

---

## üí° Conseils

### Pour un d√©ploiement r√©ussi :

1. **Ne sautez pas d'√©tapes** - M√™me si vous pensez conna√Ætre
2. **Testez apr√®s chaque √©tape** - Plus facile de d√©bugger
3. **Gardez les logs ouverts** - `pm2 logs` en continu
4. **Sauvegardez vos configurations** - `.env`, config nginx
5. **Documentez vos modifications** - Notes personnelles
6. **Testez le red√©marrage** - `sudo reboot` puis v√©rifiez que tout remarche

### Erreurs courantes √† √©viter :

- ‚ùå Oublier d'autoriser le port 22 avant d'activer UFW
- ‚ùå Ne pas changer les secrets JWT en production
- ‚ùå Oublier de whitelister l'IP OVH dans MongoDB Atlas
- ‚ùå Ne pas configurer `pm2 startup` et `pm2 save`
- ‚ùå Ne pas tester `http://localhost:3000` avant Nginx

---

## üìà Prochaines √©tapes apr√®s le d√©ploiement

1. **Monitoring** - Installer PM2 Plus pour monitoring avanc√©
2. **Backups** - Configurer backups automatiques MongoDB
3. **Domaine** - Configurer un nom de domaine personnalis√©
4. **CDN** - Utiliser Cloudinary CDN pour les images
5. **Logs** - Configurer la rotation des logs
6. **Performance** - Activer la compression Nginx
7. **S√©curit√©** - Configurer fail2ban, changer port SSH
8. **CI/CD** - Automatiser le d√©ploiement avec GitHub Actions

---

## üéì Ressources suppl√©mentaires

### Documentation OVH
- https://docs.ovh.com/

### Documentation des outils
- Node.js : https://nodejs.org/docs/
- PM2 : https://pm2.keymetrics.io/docs/
- Nginx : https://nginx.org/en/docs/
- MongoDB Atlas : https://docs.atlas.mongodb.com/
- Let's Encrypt : https://letsencrypt.org/docs/

### Tutoriels utiles
- Linux pour d√©butants
- S√©curisation d'un VPS
- Optimisation Nginx

---

## ‚úÖ Checklist des fichiers cr√©√©s

Apr√®s avoir d√©ploy√©, vous devriez avoir sur le serveur :

```
~/apps/projet-covoiturage/backend/
‚îú‚îÄ‚îÄ .env                          ‚úÖ Cr√©√© pendant d√©ploiement
‚îú‚îÄ‚îÄ ecosystem.config.js           ‚úÖ Cr√©√© pendant d√©ploiement
‚îú‚îÄ‚îÄ deploy-ovh.sh                 ‚úÖ Clon√© depuis git
‚îú‚îÄ‚îÄ DEPLOYMENT_OVH.md             ‚úÖ Clon√© depuis git
‚îú‚îÄ‚îÄ RESUME_DEPLOYMENT_OVH.md      ‚úÖ Clon√© depuis git
‚îú‚îÄ‚îÄ CHECKLIST_DEPLOIEMENT_OVH.md  ‚úÖ Clon√© depuis git
‚îú‚îÄ‚îÄ COMMANDES_OVH.md              ‚úÖ Clon√© depuis git
‚îú‚îÄ‚îÄ README_DEPLOYMENT.md          ‚úÖ Clon√© depuis git
‚îî‚îÄ‚îÄ INDEX_DEPLOIEMENT.md          ‚úÖ Ce fichier
```

---

**Bonne chance avec votre d√©ploiement ! üöÄ**

**Commencez par :** `README_DEPLOYMENT.md` puis `DEPLOYMENT_OVH.md`

